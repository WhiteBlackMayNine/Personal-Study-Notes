---
tags:
  - 科学/编程语言/Csharp/唐老师/进阶/委托和事件/Lambad表达式
created: 2024-03-22
课时: "30"
来源: https://www.taikr.com/course/1144/task/35957/show
---

---
# 关联知识点

[[匿名函数]]

---
# 知识点

## 什么是 Lambad 表达式

- 可以将 Lambad 表达式 理解为**匿名函数的简写
- 除了写法不同
- 使用上和匿名函数一模一样
- 都是和委托或事件配合使用
	- **必须有委托/事件变量 存储**
## 语法

- `(参数列表) => { //函数逻辑 };`
## 使用

### 无参无返回

- `Action a = ()=>{ 函数逻辑 };`
- `a();`
### 有参

- `Action<参数类型> a = (参数列表)=> { 函数逻辑 };`
- `a(参数列表);`
	- 注意参数类型要一致
### 甚至参数类型都可以省略，参数类型和委托或事件容器一致便可

- `Action<int> a = (value)=> { 函数逻辑 };`
	- lambad 中参数类型可以省略
### 有返回值

- `Func<string,int> a = (value) => { 函数逻辑 };`
- **一般情况下都会省略参数类型
	- **C#的编译器能够根据上下文推断出参数的类型**
## 闭包

### 概念

- 内层的函数可以引用包含在它外层的函数的变量
- 即使外层函数的执行已经终止
### 注意

- 该变量提供的值并非变量创建的值，而是在父函数范围内的最终值
	- 使用循环时，最后打印出来值为最终值
		- `for(int i = 0;i < 10;i++){ action += ()=> { Console.Write(i);} }`
			- 最终打印为 十 个 10
	- 解决方案
		- 在循环中声明一个临时变量，打印这个临时变量
			- `int index = i; Console.Write(index);`
			- 第二次或更多循环后，`index` 都会重新声明并赋值
- 内存会一直被占着，不会被释放（改变生命周期）
	- 除非对其进行置空（搭配知识点代码看 `class Test{}` 中）

---
# 总结

- 匿名函数的特殊写法 就是 Lambad表达式
- 固定写法 
	- `(参数列表)=>{}
		- 参数列表 可以直接省略参数类型
- 主要在 委托传递和存储时 为了方便可以直接使用匿名函数或者lambad表达式
- 缺点
	- 无法指定移除
- 注意
	- 可以在 Lambad 中再包裹一个函数

---
# 源代码

![[lambad表达式知识点 .cs]]

---
# 练习题

 ![[lambad表达式练习题.cs]]

---
