---
tags:
  - 科学/Unity/唐老狮/Unity入门/核心系统/音效系统/麦克风输入相关
created: 2024-03-24
---

---
# 关联知识点



---
# 获取设备麦克风信息

- Unity 已经提供了一个公共类 `Microphone` 来专门处理麦克风输入相关

```C#
string[] strs = Microphone.devices;//API 返回的是一个数组
for (int i = 0; i < strs.Length; i++)
{
	print(strs[i]);
}
```
# 开始录制

- 参数一
	- 设备名 传空使用默认设备
- 参数二
	- 超过录制长度后 是否重头录制
	- 从头录制回覆盖之前录制的内容
- 参数三
	- 录制时长
- 参数四
	- 采样率（默认设置为 44100）

```C#
//API 返回值为一个 音效切片文件 AudioClip
clip = Microphone.Start(null, false, 10, 44100);
```
# 结束录制

- 传入空，使用默认设备
- 结束录制后，这个录制的内容就会存到 音效切片文件中

```C#
Microphone.End(null);
```
# 获取音频数据用于存储或者传输

- ~~确切来说这块知识属于AudioClip的~~
## 得到数据关键方法

- `GetData` 获取数据的方法
	- 需要传入一个 `float` 数组，然后会把数据存入到这个数组里面
	- 传输的时候就会去传输这个数据给远方，或者说我们直接把这个数组存到本地
- `SetData` 把存储的数据取出来（的方法）
	- 然后设置给某一个对象，就可以获取到一个原因的音效
- `channels` 声道数
	- 用于 得到数组的长度
- `samples` 音频的长度
	- 用于 得到数组的长度

```C#
//规则 用于存储数组数据的长度 是用 声道数 乘以 剪辑长度
float[] f = new float[clip.channels * clip.samples];
clip.GetData(f, 0);//第二个参数为 偏移位置 一般都设置为0
print(f.Length);
```

- 以后学习了 二进制文件存储 和 网络相关的知识后
- 就可以把这个 `float` 数组 转成字节数组然后存储到本地或者传输到远程服务器

---
