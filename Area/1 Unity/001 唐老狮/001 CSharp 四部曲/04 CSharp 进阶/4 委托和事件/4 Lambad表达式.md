---
tags:
  - 科学/编程语言/Csharp/唐老狮/进阶/委托和事件/Lambad表达式
created: 2024-03-22
课时: "30"
来源: https://www.taikr.com/course/1144/task/35957/show
---

---
# 关联知识点

[[3 匿名函数]]

---
# 知识点

## 什么是 Lambad 表达式

- 可以将 Lambad 表达式 理解为**匿名函数的简写
- 除了写法不同
- 使用上和匿名函数一模一样
- 都是和委托或事件配合使用
	- **必须有委托/事件变量 存储**
## 语法

- `(参数列表) => { //函数逻辑 };`
## 使用

### 无参无返回

- `Action a = ()=>{ 函数逻辑 };`
- `a();`
### 有参

- `Action<参数类型> a = (参数列表)=> { 函数逻辑 };`
- `a(参数列表);`
	- 注意参数类型要一致
### 甚至参数类型都可以省略，参数类型和委托或事件容器一致便可

- `Action<int> a = (value)=> { 函数逻辑 };`
	- lambad 中参数类型可以省略
### 有返回值

- `Func<string,int> a = (value) => { 函数逻辑 };`
- **一般情况下都会省略参数类型
	- **C#的编译器能够根据上下文推断出参数的类型**
## 闭包

### 概念

- 内层的函数可以引用包含在它外层的函数的变量
- 即使外层函数的执行已经终止
### 注意

- 该变量提供的值并非变量创建的值，而是在父函数范围内的最终值
	- 使用循环时，最后打印出来值为最终值
		- `for(int i = 0;i < 10;i++){ action += ()=> { Console.Write(i);} }`
			- 最终打印为 十 个 10
	- 解决方案
		- 在循环中声明一个临时变量，打印这个临时变量
			- `int index = i; Console.Write(index);`
			- 第二次或更多循环后，`index` 都会重新声明并赋值
- 内存会一直被占着，不会被释放（改变生命周期）
	- 除非对其进行置空（搭配知识点代码看 `class Test{}` 中）
## => 与 () =>

- “=>”符号左侧是输入参数（如果有的话），右侧是表达式或语句块
	- 这个表达式或语句块代表了lambda表达式的主体
	- 例如：`(x) => x * 2`
		- 表示一个接受一个参数x并返回x乘以2的匿名函数
- “() =>”符号左侧没有输入参数，右侧是表达式或语句块
	- 这个表达式或语句块代表了lambda表达式的主体
	- 例如：`() => Console.WriteLine("Hello World!")`
		- 表示一个不接受任何参数并打印"Hello World!"的匿名函数。
# 补充

## 属性与 =>
### 属性

- **用于游戏对象组件和资源的设置和选项**
	- 可以在Inspector窗口中进行编辑
- **引用属性**
- **值属性**
	- 通常用于设置组件的具体参数，如位置、速度、颜色等
- **代码层面**
	- 属性还可以有getter和setter方法
### =>

- 在C#中用于定义属性的getter方法，它简单地返回一个值或计算结果，提供了对类内部状态的只读访问
- 就是将两个变量/表达式  **关联**  起来
- ![[Lambad表达式进化.png]]
#### AI

想象一下你是一位餐厅的老板，你的餐厅提供各种各样的菜品。现在，你想要让顾客能够方便地了解每个菜品的信息，比如名字、价格和配料等。你可以创建一个菜单，上面列出了每个菜品的详细信息。在这个比喻中，菜单就像是C#中的属性（Property），而 `=>` 则是你用来制作菜单的方式。

具体来说，假设你有一个菜品叫“宫保鸡丁”，它的价格是25元，配料有鸡肉、花生和辣椒。在这个例子中，你可以将“宫保鸡丁”的名字、价格和配料看作是私有变量（就像你厨房里的秘密配方）。然后，你可以使用 `=>` 来创建一个菜单项，让顾客能够看到这些信息。

在C#中，你可以这样定义一个属性：

`csharp复制代码运行  public string DishName => "宫保鸡丁";`

这行代码的意思是，当别人想要知道这个菜品的名字时，你告诉他们“宫保鸡丁”。这里的 `=>` 就是用来连接菜品的实际信息（即私有变量）和你给顾客看的菜单项（即属性）的桥梁。

同样地，你也可以为价格和配料创建属性：

`public float Price => 25; public string[] Ingredients => new string[] { "鸡肉", "花生", "辣椒" };   `

- 在C#中用于定义属性的getter方法，它简单地返回一个值或计算结果，提供了对类内部状态的只读访问
- 简单理解就是
	- 利用 => 连接了变量，让左侧的值等于右侧的值（但这么说并不准确）
	- 例如：`public int b => a * 2;
		- 使用 => 将 `b` 定义为一个属性（确切来说是只读属性）
		- **每次访问**`b`时都会计算并返回 `a * 2` 的结果（即 `b` 的 值 = `a *2`）
#### 注意

- 可以与判断连用 
	- `private bool _isDie => (_currentHP <= 0f);`
	- 当前生命值小于0 就设置为 true 即死亡



---
# 总结

- 匿名函数的特殊写法 就是 Lambad表达式
- 固定写法 
	- `(参数列表)=>{}
		- 参数列表 可以直接省略参数类型
- 主要在 委托传递和存储时 为了方便可以直接使用匿名函数或者lambad表达式
- 缺点
	- 无法指定移除
- 注意
	- 可以在 Lambad 中再包裹一个函数

---
# 源代码

![[lambad表达式知识点 .cs]]

---
# 练习题

 ![[lambad表达式练习题.cs]]

---
