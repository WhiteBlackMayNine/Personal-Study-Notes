
#科学/Unity/VipSkill/P1课程/入门/导航系统

- Navigation导航系统
	- Unity导航系统
		- 类型
			- AI角色
				- 基于计算机本身控制的纯导航
			- 主角
				- 基于UI交互下的导航
		- 过程
			- 需要考虑阻挡，路径选择，可走地形，地形特点以及拟人化等多方面因素
		- 实现方式
			- `A*`算法
				- 一种从起点到终点探测代价最小路径的广度优先搜索方式
					- 广泛应用于2D格子型地图
			- Navigation Mesh寻路算法原理
				- `A*`算法的变种
				- 将`A*`算法当中的格子变成三角形或多边形
				- 可以方便的从二维扩展到三维空间
				- 是3D游戏当中的主流寻路算法
	- 自动寻路
		- NavMesh导航网格
			- 作用
				- 3D游戏世界中用于实现动态物体自动寻路
					- 将游戏中复杂的结构组织关系简化为带有一定信息的网格
					- 在这些网格的基础上通过一系列的计算来实现自动寻路
			- 两部分
				- 使用工具根据地图信息生成寻路用的NavMesh
				- 在游戏中根据生成的NavMesh来自动寻路
			- 创建
				- 首先搭建场景
				- 将需要贡献导航网格的对象设置为导航静态
				- 选中物 体后点击Static，勾选上Navigation Static
			- 设置
				- Scene Filter
					- 设置场景当中需要进行烘焙的物体
				- Navigation Area
					- 设置该物体贡献的导航网格在场景当中属于哪一层
					- 是可行走还是不可行走或者是可跳跃的
			- 参数
				- Bake
					- 用于设置烘焙导航网格的参数
				-  Agent Raduis
					- 烘焙路面参考的角色半径 
				- Agent Height
					- 烘焙路面参考的角色高度
				- Max Slope
					- 最大坡度
				- Step Height
					- 台阶的最大高度
				- Drop Height
					- 可跳下高度 
				- Jump Distance
					- 可跨越宽度
		- NavMeshAgent组件
			- 作用
				- 设置物体能够在导航网格上寻路
				- 可以控制物体在导航网格上面行走的一个组件
				- 所以该组件添加在能够自动寻路的角色身上
			- 参数
				- 代理尺寸
					- Radius
						- 代理半径，仅用于计算寻路
					- Base Offset
						- 碰撞几何体相对于实际 几何体垂直的偏移
					- Height
						- 代理高度（用于调试图形）
				- 代理操控
					- Speed
						- 代理移动的最大速度
					- Angular Speed
						- 最大转速
					- Acceleration
						- 最大的加速度
					- Stopping Distance
						- 制动距离
						- 到目的地小于这个值，代理开始减速
					- Auto Braking
						- 选中之后会自动制动
				- 障碍回避
					- Quality
						- 回避障碍物的质量水平
					- Priority
						- 优先级
						- 优先级高的物体会将优先级低的物体排挤开
				- 查找路径
					- Auto Traverse Off Mesh
						- 自动遍历Off Mesh Link
					- Auto Repath
						- 重新规划路径
					- Area Mask
						- 遮罩区域，也即是路径规划会考虑到的层
			- 常见的属性和方法
				- ![[NavMeshAgent常见的属性和方法1.png]]
				- ![[NavMeshAgent常见的属性和方法2.png]]
			- 代码示例
				- ![[NavMeshAgent代码示例.png]]
	- 分离路面导航
		- Off Mesh Link组件
			- 在两个不连通的寻路网格间，如果角色想在这两个网格间行走就需要添加跳跃的链接Off Mesh Link
			- 它是实现代理可以不链接的表面行走必不可少的组件，比如跳跃河岸等
		- 参数
			- Start
				- 分离网格链接开始点物体 
			- End
				- 分离网格结束点物体
			- Cost Override
				- 开销覆盖，开销越大，在有其他路线情况下会优先考虑其他路径
			- Bi Directional
				- 起止点是否双向定向 
			- Activated
				- 指定该Off Mesh Link是否参与寻路
			- Auto Update Positions
				- 启用时，Off Mesh Link会自动重新连接Start与End的坐标
			-  Navigation Area
				- 描述Link所属的NavMesh区域类型
		- 分层烘焙路面
			- 作用
				- 在导航系统当中可以将导航网格划分为不同的区域
				- 方便动态设置哪些层可以行走，哪些层不可行走
			- 步骤
				- 自定义Area层
				- 设置场景中不同区域烘焙为不同的层
				- 设置角色可以在导航网格中哪些层移动
		- 动态障碍
			- Nav Mesh Obstacle
				- 模式
					- 普通的模式
						- 通过设置半径与高度来确定一个范围，阻挡代理的移动
					- Carve模式
						- 会根据模型大小界定该区域无法参与导航网格计算
				- 属性
					- Shape
						- 该导航阻挡的形状
					-  Size
						- 导航阻挡在各个轴向上的尺寸
					- Carve
						- 是否使用Carve模式，使用Carve模式该导航阻挡可以动态移动












