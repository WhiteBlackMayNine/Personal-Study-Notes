---
tags:
  - 科学/编程语言/Csharp/唐老师/进阶/委托和事件/匿名函数
created: 2024-03-22
课时: "28"
来源: https://www.taikr.com/course/1144/task/35955/show
---

---
# 关联知识点

[[Lambad表达式]]

---
# 知识点

## 什么是匿名函数

- 没有名字的函数
- 使用主要是搭配委托和事件进行的
- 脱离委托和事件，是不会使用匿名函数的
## 基本语法

- ` delegate (参数列表){ //函数逻辑 };`
	- 这样只是声明匿名函数，还没有存入与调用
		- 作为参数传递时，不需要写`;`
	- `Action a = delegate (参数列表){ //函数逻辑 };`
		- 将匿名参数存入委托/事件变量 `a` 中
	- `a(参数列表);` 
		- 真正调用时，就是这个委托/事件容器什么使用调用，就什么时候调用匿名函数
## 何时使用

- 函数中传递委托参数时
- 委托或事件赋值时
### 使用

### 无参无返回

- `Action a = delegate (){ //函数逻辑 };`
- `a();`
### 有参

- `Action<参数列表> a = delegate (参数列表){ //函数逻辑 };`
- `a(参数列表);`
### 有返回值

- `Func<返回值类型> func = delegate(){ return 返回值 };`
- `Console.WriteLine(func());`
### 一般情况下

- 会作为函数参数传递，或者作为函数返回值
### 参数传递

- `Text t = new Text();` Text 为一个类
- `t.Dosomething( 函数名/ delegate()){ })` 
	- `Dosomething(委托类型 委托名)` 为类中一个方法
		- 数类型为一个委托类型（也可以理解为一种函数格式，只有符合便可）
- 可以在传入时声明一个匿名函数
- 也可以将匿名函数存入到一个委托/事件变量后，将委托变量视为函数参数传入
### 返回值

- `public 返回值类型 函数名(参数列表){ return 函数名 / delegate(参数列表){ //函数逻辑 };}`
	- 请确保函数格式一致，并且注意参数列表
- 返回一个匿名函数，需要存入一个委托/事件变量中
- `委托/事件变量.函数名()();`
	- 前面`()`执行，返回一个函数，随后再次执行`()`调用返回的函数
## 缺点

- 添加到委托/事件容器后，不记录
	- 导致无法单独移除
	- 只能直接缺口
- 因为匿名函数没有名字，没有办法指定移除匿名函数

---
# 总结

- 匿名函数 就是没有名字的函数
- 固定写法
	- `delegate(参数列表){}
- 主要是在 委托传递和存储时为了方便可以直接使用匿名该函数
- 缺点
	- 没有办法指定移除
- 注意
	- 可以在 匿名函数 中再包裹一个函数

---
# 源代码

![[匿名函数知识点 代码.cs]]

---
# 练习题

- 改变生命周期
- ![[匿名函数 练习题.cs]]

---

