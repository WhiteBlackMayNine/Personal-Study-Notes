---
tags:
  - 科学/Unity/唐老师/Unity核心/2D相关/Tilemap/瓦片调色板窗口
created: 2024-07-22
更新:
---

---
# 关联知识点



---
# 创建瓦片调色器相关参数

- 也就是瓦片调色板窗口左上角 Creat New Palette 面板相关参数
## Name

- 瓦片调色器名称
## Grid

- 瓦片的网格布局
### Rectangle

- 矩形瓦片
- 一般为横板游戏
### Hexagon

- 六边形瓦片
### lsometric

- 等距瓦片，单元格为菱形
- 适用于不涉及复杂高度差的等距视角游戏，例如某些策略游戏或角色扮演游戏（2.5D）
### Isometric Z as Y

- 等距瓦片并且 Unity 将单元格 Z轴 转换为局部 Y 坐标
- 如果瓦片出现高度差，那么需要修改瓦片的轴心点
	- 让轴心点尽量在图片的中央
- 更适合那些需要模拟不同海拔高度如平台类游戏或具有复杂地形的策略游戏（2.5D）
## Hexagon Type

- 六边形瓦片地图类型
### Point Top

- 点朝顶部的六边形
### Flat Top

- 面朝顶部的六边形
## Cell Size

- 瓦片绘制到单元格的大小
### Automatic

- 基于瓦片资源的精灵大小自动设置
### Manual

- 自定义大小
# 基本操作技巧

- 单击瓦片 ——> 选择瓦片
- 在多个瓦片上移动 ——> 选择多个瓦片
- Alt + 左键拖动 ——> 平移
- 滚轮键拖动 ——> 平移
- 旋转滚轮键 ——> 放大/缩小
# 面板基本功能

- 左上角切换要编辑的瓦片调色板，然后点击 Edit 进行编辑
	- 编辑完成后点击 Edit
		- 相当于保存
- ![[瓦片调色板窗口面板工具相关.png]]
# 编辑瓦片地图
## 方法一

- 通过瓦片调色板文件创建
- 创建 瓦片调色板 时，会保存一个预制体文件
- 把预制体文件拖拽到场景上
	- 激活子对象上的 Tilpmap Renderer 脚本
- 瓦片调色板上面的瓦片地图也就会实时的显示在场景上了
- 但方法一使用的不多，步骤较多且麻烦
## **方法二**

- 直接在场景中进行创建
- 场景右键 ——> 2D Object ——> Tilemap（包括后面几个，为不同类型的瓦片地图）
- 在瓦片调色板上使用面板工具
- 然后直接在场景上进行编辑
	- 这样就可以在 Game 与 Scene 上实时的去显示瓦片地图
- 操作简便
## 主要作用

- 矩形瓦片地图用于做横版游戏地图
- 六边形弯片地图用于做策略游戏地图
	- 文明六
- 等距瓦片地图用于做有 “Z" 轴的2D游戏
## 注意

- 在编辑 *等距瓦片* 地图时
	- **需要修改工程的自定义轴排序 以 Y轴 决定渲染顺序**
		- Edit ——> Project Settings ——> Graphics
		-  ——> Transparency Sort Mode 选择 Custom Axis
		- Transparency Sort Axis 设置为
			- X 0 Y 1 Z -0.26
			- 官方提供
		- 随后在瓦片地图上的 Tilemap Renderer 脚本上的 Mode 切换为 Individual 
	- 如果地图存在前后关系需要修改 TileRenderer 的渲染模式
	- 可以通过 Z轴 偏移来控制绘制单个瓦片时的高度
		- 如果不想更改图片的轴心点
		- 那么在选中一个瓦片后，可以勾选 Can Change Z Position
		- 然后手动修改它的 Z轴 位置
			- 不同的Z轴位置可以有不同张图
		- 快捷键 ——> - / + （下降 / 上升）
	- 精灵纹理的中心点会影响最终的显示效果
# 等距瓦片地图的一些问题
## 准备设置

- 项目设置中 X 0  Y 1  Z - 0.26
## 玩家图片

- 由于等距瓦片地图有纵深
- 因此玩家图片的中心点应当在最下方中央处
	- 即 X ——> 0.5 Y ——> 0
- Spite Renderer 组件上的 Spite Sort Point 选择 Pivot
## 瓦片资源

- 更改中心点
	- 按需要去更改
## Tilemap Renderer

- 渲染方式选择 ——> Indevidual
## 排序问题

- 如果玩家的轴心点在瓦片资源中心点之下，那么渲染时玩家在瓦片资源前面
	- 如果在上面，则渲染时玩家在后面
### 解决方式
#### 轴心点排序

- 可以把瓦片资源的中心点改为最上面的那个角
- 但会带来新的问题
	- 在编辑时，瓦片资源显示方式可能造成肉眼的偏差
#### **排序层排序**

- **推荐**
- 利用 Tilemap 可以加多个层来解决
- 玩家层级设置的比地面高
- 然后 围栏、地面设置在不同的层（或不同的层级）
## 元素之间前后排序

- 同层轴心点排序
	- 拖入到瓦片调色板窗口
	- 编辑方便，但一个格子只能有一个元素
- 直接拖进一张2D图片，然后让2D对象和玩家进行通过轴心点排序
	- 需要编辑2D图片的轴心点
		- 选中图片，然后去图片资源上 Sprite Editor 上编辑
	- 略微麻烦，但一个格子能有多个元素
- Sprite Sort Point 需要选择为 Pivot
## 角色重力设置

- 等距瓦片地图角色不使用重力
- 在地面上行走，但是地面不会添加碰撞器
	- 因为等距瓦片地图有纵深，会上下纵深移动
## 碰撞器设置

- 由于地图不应该添加碰撞器
	- 因此地图瓦片资源的 Collider Type 应该设置为 None
- 墙体应该设置为 Grid
	- 为格子的大小，而不是图片形状
	- 否则，在玩家触碰到墙体图片便会产生碰撞
- 如果产生 往上走时 玩家与墙面碰撞导致提前碰撞
	- 也就是玩家和墙体直接仍有距离
- 那么可以 直接制作两个墙体瓦片资源
	- 一个 Collider Type 类型为 None
		- 用于制作围墙
	- 一个则是 Grid
		- 这个绘制在围墙的外围，类似于包裹
		- 用于产生碰撞器
## 跳跃问题

- 创建一个空物体，玩家挂载于这个空物体
	- 玩家为空物体的子对象
- 然后玩家的移动脚本、刚体、碰撞器挂载在空物体上
- 玩家跳跃，也就是让玩家相对于本地进行跳跃
	- 相对于空对象


---
