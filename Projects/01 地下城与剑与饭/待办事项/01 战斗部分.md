---
tags:
  - "#Unity"
  - "#待办事项"
  - "#2025CUSGA"
---

# 玩家角色策划案

- 改用FSM来做了
- 状态机中的计时器 ——> 等美术下落后考虑改为 动画事件
- 所有 FSM重写是否完成 都等到美术下来后 测试完毕 才能勾选
## 玩家角色基本属性

- [ ] FSM重写是否完成

- [x] 攻击
	- [x] 决定大部分招式的伤害

- [x] 生命
	- [x] 归零时角色死亡

- [x] 护盾
	- [x] 在受到伤害时优先消耗护盾而非生命值
	- [x] 但护盾通常有时间限制，时间结束后护盾自动消失

- [x] 免伤率（%）
	- [x] 受到伤害减免

- [x] 伤害加成（%）
	- [x] 造成伤害提升

- [x] 移动速度
	- [x] 玩家移动的速度

- [x] 抗打断力
	- [x] 若玩家受到当前伤害的打断力>玩家抗打断力，则立刻停止玩家当前动作并进入受击状态

- [x] 打断力
	- [x] 当前伤害的打断力

- [x] 招式倍率（%）
	- [x] 每个招式附带不同的攻击倍率

- [x] 眩晕值
	- [x] 每个招式附带不同的眩晕值

- [x] 玩家每次受到伤害 = 原始伤害*（1-免伤率）

- [x] 玩家每次造成伤害 = 攻击力 * 招式倍率 * （1+伤害加成）

- [ ] 上述所有属性都可能受到战前buff、携带物品、招式的影响或在地下城中获得临时提升
	- [ ] 战前buff
	- [ ] 携带物品
	- [ ] 招式
## 基础操作

- [ ] FSM重写是否完成

- [x] 攻击无法移动
- [x] 奔跑攻击后切换回正常速度
### 基础移动

- [ ] FSM重写是否完成

- [ ] 普通移动
	- [x] 持续按下【A】/【D】以分别向左/右移动
	- [ ] 后输入的移动操作会覆盖当前操作
	- [ ] 移动开始有大约0.3s的短暂加速过程
	    
- [ ] 奔跑
	- [x] 在0.5s内连续按下两次【A】/【D】键以进行奔跑
	- [x] 奔跑状态下x轴移动速度大幅提升
	- [x] 但当奔跑时按下相反方向键会有急停转身的硬直动作（大约0.5s）
	    
- [x] 跳跃
	- [x] 按下【space】以进行y轴跳跃
	- [x] 按住空格键时间越长y轴跳跃最大距离越大，但存在上限
	- [x] 空中可以使用【A】/【D】控制移动方向
	- [x] 此时x轴移动速度会略慢于起跳前的x轴速度
### 进阶移动

- [ ] FSM重写是否完成

- （随游戏进程解锁）

- [x] 冲刺
	- [x] 按下【shift】进行短距离冲刺
	- [ ] 冲刺期间仍会受到伤害但会大幅度提升抗打断力
	- [x] 冲刺操作可以打断玩家当前进行的攻击
	- [x] 使用冲刺后玩家获得约0.25s的无敌状态
	- [x] 如果在无敌状态下被来自怪物的攻击击中，则此次闪避被视为“极限闪避”
	- [x] 如果【shift】与任意【A】/【D】键同时按下，则会向对应方向冲刺
	- [x] 否则会向当前面朝方向的相反方向后跳。
	    
- [x] 挂墙
	- [x] 当玩家在空中下落时接触粗糙墙壁可以持续按住对应方向键单手扒在墙体上
	- [x] 挂墙时玩家仍会以一个缓慢速度下降
	- [x] 可以按下跳跃键取消挂墙
	- [x] 并向相反方向以较快x轴速度进行 “蹬墙跳”
	    
- [x] 二段跳
	- [x] 当玩家在空中时，可以按下【space】以进行一次较短的y轴跳跃
	- [x] 二段跳、重新接触地面刷新
		- [x] 重新接触地面刷新
## 固有技能

- [ ] 死亡回归（涉及存储 用JSON？）
	- [ ] 在地下城中死亡后自动发动
	- [ ] 于地下城入口处复活
	- [ ] 但至多携带3件随身物品
		- [ ] （可升级）

- [ ] 思维加速
	- [ ] 在地下城中查看背包或按下暂停键时自动发动
		- [ ] 停止游戏时间与一切局内计时
	- [ ] 主动发动时
		- [ ] 减缓游戏时间流速至原来的1/5，持续5s
		- [ ] 可以通过再次发动该技能以提前结束技能
		- [ ] 待该技能结束后进入冷却
## 武器系统

- [ ] FSM重写是否完成

- 由于动画事件ATK需要传入范围参数（也就是顶点坐标）
- 所以需要等美术资源来了后
	- [ ] 修改冷却时间
	- [x] 修改玩家状态机
	- [x] 编辑玩家攻击范围
		- [x] 修改 CharacterComboData 数据
		- [x] 修改 CharacterComboTable 数据

- 玩家 PCC 是基本完事了
- 主要就是各个武器的自己的逻辑了
	- 单手剑完成度比较高
	- 变形剑就有点低了

- [x] 所有怪物除了HP条之外都有一个眩晕值累计条
	- [x] 条满后会进入一段时间的眩晕状态（停止所有行动）
	- [x] 不同攻击会造成不同的眩晕值积累

- [x] 玩家装备不同武器时攻击模式会发生对应变化
	- [x] 玩家可以同时装备两把武器，使用【R】进行武器切换
### 单手剑
#### 基础攻击：

- [ ] FSM重写是否完成

- [x] 普通攻击【J】：出招较快，较低的伤害与极低眩晕值积累

- [x] 剑鞘攻击【K】：出招较慢，较低的伤害与较高眩晕值积累

#### 四连普通攻击：

- [ ] FSM重写是否完成

- [x] 【J】+【J】+【J】+【J】连续按下按键，玩家发动四次不同的攻击

#### 剑鞘攻击：

- [ ] FSM重写是否完成

- [x] 【K】使用剑鞘发动攻击
	- [x] 此攻击可击落来自敌人的飞行道
	- [x] 如果成功击落则+【K】发出一道强化剑气

#### 下落攻击：

- [ ] FSM重写是否完成

- [x] 在空中【J】可发动下落攻击
	- [ ] 玩家急速下坠并在落地后进行一个小范围长方形AOE攻击

#### 后撤前刺攻击/后撤剑气：

- [ ] FSM重写是否完成

- [x] 在“四连普通攻击”，“idle”，或在空中可随时按下【shift】衔接“闪避”
	- [x] 随后+【J】向前冲刺（距离同闪避）并伤害沿途敌人，期间不会被打断但仍会受伤
	- [x] 或是+【K】发出一道远程剑气

- [x] 如果中途衔接的“闪避”触发“极限闪避”，则强化后续攻击
	- [x] 冲刺攻击无敌
	- [x] 剑气伤害与距离增加

#### 切换攻击：

- [ ] FSM重写是否完成

- [x] 当玩家将手持武器切换为“单手剑”时向后方进行“闪避”
	- [x] 此闪避无视自身闪避的内置冷却，也不会使角色本身的闪避进入内置冷却，
- [x] 如果此次“闪避”触发“极限闪避”，则可直接派生
	- [x] 后撤前刺攻击/后撤剑气
	- [x] 并在短时间内获得攻击力增益
### 变形剑

- [ ] FSM重写是否完成

- [x] 默认状态下
	- [x] 变形剑为右手剑左手盾，
- [x] 在爆发状态下
	- [x] 可将剑插入盾中，变形为重剑

- [ ] 压力
	- [x] 变形剑特有的能量，上限为5点
	- [ ] 变形剑某些招式会回复或消耗此能量并附加额外效果
#### 基础攻击：

- [ ] FSM重写是否完成

- 剑盾形态下：

- [x] 普通攻击【J】：出招较慢，较低的伤害与较低眩晕值积累

- [ ] 格挡【K】：出招较快
	- [ ] 能够格挡来自敌人的攻击
	- [x] 持续按住可以持续进行格挡
		- [x] 并提升5点抗打断力
		- [x] 但免伤率会从100%逐渐降低为20%
		- [x] 进行格挡的0.5s内免伤率为100%，之后每0.5s降低20%
		- [x] 该免伤率会在未进行格挡的状态下每0.5s恢复20%
	- [x] 进行格挡的0.5s内如果成功格挡敌人攻击，则触发“完美格挡”
		- [x] 并将免伤率立刻恢复至100%且回复1点“压力”
			- [x] 免伤率立刻恢复至100%
			- [x] 回复1点“压力”

- 重剑形态下：

- [x] 普通攻击【点按J】：出招极慢，中等的伤害与较低眩晕值积累

#### 下落攻击（剑盾形态）：

- [ ] FSM重写是否完成

- [ ] 在空中【J】可发动下落攻击
	- [x] 玩家急速下坠
	- [ ] 并在落地后进行一个小范围长方形AOE攻击

#### 二连普通攻击（剑盾形态）：

- [ ] FSM重写是否完成

- [x] 【J】+【J】连续按下按键，玩家发动两次不同的攻击

#### 盾突（剑盾形态）：

- [ ] FSM重写是否完成

- [x] 在“格挡”时+【K】可发动盾突
	- [x] 盾突期间提升2点抗打断力
	- [x] 玩家向前突进约一个身位
	- [ ] 并对前方所有敌人造成极低伤害与中等眩晕值积累
	- [x] 并回复1点“压力”。

- [ ] 如果在“完美格挡”时发动盾突则强化本次盾突
	- [ ] 对前方所有敌人造成极低伤害与较高眩晕值积累
	- [x] 且此次盾突期间玩家无敌
	- [x] 并回复2点“压力”

#### 入鞘变形（剑盾形态）：

- [ ] FSM重写是否完成

- [x] 按下【L】以发动变形，角色将剑插入盾中，变形成为重剑形态

- [ ] 如果玩家在触发“完美格挡”时进行“入鞘变形”
	- [x] 则可在“入鞘变形”结束后直接派生“蒸汽回旋斩”

#### 二连普通攻击（重剑形态）：

- [ ] FSM重写是否完成

- [x] 【J】+【J】连续按下按键，玩家发动两次不同的攻击

#### 下落攻击（重剑形态）：

- [ ] FSM重写是否完成

- [ ] 在空中【J】可发动下落攻击
	- [ ] 玩家急速下坠
	- [ ] 并在落地后进行一个小范围长方形AOE攻击

#### 蒸汽回旋斩（重剑形态）：

- [ ] FSM重写是否完成

- [x] 在二连普通攻击的第二次攻击期间同时按下【J】与【K】，玩家将在二连普通攻击结束后发动“蒸汽回旋斩”

- [ ] 如果玩家此时持有“压力”
	- [ ] 则消耗所有“压力”并根据消耗的“压力”提升此攻击的伤害，眩晕值积累以及攻击范围
		- [ ] 直接换 ComboData （但动画可以不换）
	- [ ] 如果此次“蒸汽回旋斩”消耗了5点“压力”
		- [x] 则发动期间无敌
		- [x] 且可在“蒸汽回旋斩”结束前再次按下【J】发动回旋斩二段。

#### 拔刀变形（重剑形态）：

- [ ] FSM重写是否完成

- [x] 按下【L】以发动变形，角色将剑从盾中拔出，变形成为剑盾形态

#### 切换攻击：

- [ ] FSM重写是否完成

- [x] 当玩家将手持武器切换为“变形剑”时，武器形态继承上一次手持变形剑的形态
	- [x] 武器如果以剑盾形态登场则自动发动一次“强化盾突”
	- [x] 武器如果以重剑形态登场则自动发动一次“蒸汽回旋斩”

---
# 备注
## 敌人相关

- 攻击范围 + 攻击造成伤害
- 受击减少生命、护盾
- 伤害加成、免伤
- 眩晕状态

- 武器具有升级效果
	- [ ] WeaponSO 添加最大强化等级
	- [ ] 升级逻辑






