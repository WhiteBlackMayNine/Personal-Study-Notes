---
tags:
  - 科学/Unity/唐老狮/UI/UGUI
created: 2024-11-20
---

---
# 关联知识点



---
# 模型显示在UI之前
## 方法一：直接用摄像机渲染3D物体

- Canvas的渲染模 不能选择为 覆盖模式  
- 摄像机模式 和 世界（3D）模式都可以让模型显示在UI之前（Z轴在UI元素之前即可）  
  
- 注意
	- 如果选择 摄像机模式 时——> 建议用专门的摄像机渲染UI相关  
	- 面板上的3D物体建议也用UI摄像机进行渲染、
### 大致思路

- 将主摄像机的渲染模式改为 摄像机模式（Screen Space - Camera）
- 然后新建一个 专门用于 渲染 UI层的 摄像机
- 把渲染层级（Culling Mask）选择为 UI层
	- 即 只渲染 UI层
- 把 Clear Flags 改为 只渲染深度 （Deepth only）
	- （记得把 Audio Lintener 移除）
- 回到 主摄像机，把渲染层级中的 UI 层 取消掉
	- 即 渲染 除 UI层 以外的 所有层级
- 最后，回到 Canvas，把创建出来的 摄像机 挂载上去

- 可以通过控制 Canvas 上的 Plane Distance 来控制 Canvas 与 CameraUI 之间的距离
	- （CameraUI ——> 专门用于 渲染 UI层的 摄像机）

- 建议直接在 Canvas 下 创建 3D物体
	- 记得修改 层级 与 缩放大小
### 简而言之

- ——> 摄像机模式
- ——> 创建一个专门的摄像机用于渲染UI
- ——> 设置摄像机参数
- ——> 挂载摄像机
- ——> 创建 物体，并修改其层级、缩放大小
## 方法二：将3D物体渲染在图片上，通过图片显示

- 专门使用一个摄像机渲染3D模型，将其渲染内容输出到Render Texture上  
- 类似小地图的制作方式  
- 再将渲染的图显示在UI上  
  
- 该方式 不管Canvas的渲染模式是哪种都可以使用
- 一般用于 要渲染的 3D 物体不是很多的时候‘

- 注意
	- 如果遇到 物体渲染出现错误、或者描边、拖曳
	- 可以将摄像机的 Clear Flags 修改为 Solid Color（纯色模式）
### 大致思路

- 像方法一 一样去创建一个摄像机，但额外创建一个 Model （例子）层级
	- 并让该摄像机只渲染 Model 层
- 然后去创建一个 Render Texture
- 把 Texture 拖到 Camera 上的 Target Texture 
	- ——> 让摄像机看到的东西，都渲染到 Texture 上
- 去 Canvas 下创建一个 RawImage（Image 不支持 Textrue 格式）
	- 把 Texture 拖到 RawImage 上
### 简而言之

- 类似于小地图的制作方式
- 把一个摄像机看到的物体，渲染到一张图片上
- 然后用 UI 控件 去显示这张图片

- 建议场景上只有一个模型的时候才用这种方法
	- 如果模型过去，就要用到更多的摄像机，浪费性能
- 覆盖模式下也可以使用这种方法
# 粒子特效显示在UI之前

- 粒子特效的显示和3D物体类似  
	- 可以创建摄像机专门渲染粒子
	- 或者修改 Z轴
	- 或者渲染到一张图片上
	  
- 注意点：  
	- 在 摄像机模式 下时  
	- 可以在粒子组件的Renderer相关参数中改变排序层 让粒子特效始终显示在其之前不受Z轴影响
## 备注

- 点击粒子特效
	- 在 Inspector 窗口下，找到 Renderer 
	- 里面有个属性为 Sorting Layer ID 与 Order in Layer
	- 用于管理排序
		- ——> 不受 Z轴影响

---
# 源代码

![[Unity UGUI 进阶 模型和粒子显示在UI之前 知识点.cs]]

---