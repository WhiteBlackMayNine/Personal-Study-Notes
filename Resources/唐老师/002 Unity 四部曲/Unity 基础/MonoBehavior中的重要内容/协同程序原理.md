---
tags:
  - 科学/Unity/唐老狮/Unity基础/MonoBehavior中的重要内容/协同程序原理
created: 2024-03-23
课时: "29"
来源: https://www.taikr.com/course/1190/task/38733/show
---

---
# 关联知识点

[[协同程序]]

---
# 知识点

## 协程的本质

- 协程可以分成两部分
	- 协程函数本体
	- 协程调度器
- 协程本体就是一个能够中间暂停返回的函数
- 协程调度器是Unity内部实现的，会在对应的时机帮助我们继续执行协程函数
- Unity只实现了协程调度部分
- 协程的本体本质上就是一个 C# 的迭代器方法
## 协程本体是[[迭代器]]方法的体现

### 协程函数本体

- 如果我们不通过 开启协程方法执行协程
- Unity 的协程调度器是不会帮助我们管理协程函数的
- 但是我们可以自己执行迭代器函数内容
### 协程调度器

- 继承 MonoBehavior 后 开启协程
- 相当于是把一个协程函数（迭代器）放入 Unity 的协程调度器中帮助我们管理进行执行
- 具体的 `yield return` 后面的规则 也是 Unity 定义的一些规则
### 总结

- 你可以简化理解迭代器函数
- C# 看到迭代器函数和 `yield return` 语法糖
- 就会把原本是一个的 函数 变成"几部分"
- 我们可以通过迭代器 从上到下遍历这“几部分"进行执行
- 就达到了将一个函数中的逻辑分时执行的目的

---
# 总结

- 协程的本质 就是利用
- C# 的迭代器函数"分步执行"的特点
- 加上
- 协程调度逻辑
- 实现的一套分时执行函数的规则

---
# 源代码

![[协同程序原理 知识点.cs]]

---
# 练习题

![[协同程序原理 练习题-Lesson15_Exercises.cs]]

![[协同程序原理 练习题-CoroutineMgr.cs]]

---





