---
tags:
  - 科学/Unity/唐老狮/Unity进阶/视频播放/视频兼容性
created: 2024-08-03
更新:
---

---
# 关联知识点



---
# 视频格式和编解码器知识点回顾

- 视频的本质就是一堆数据的集合
	- 图像、音频、字幕等等
- 不同格式的视频区别就是存读数据的方式方法不同而已

- 视频的编码器 负责将视频数据 进行压缩节约空间
- 视频的解码器 负责将视频数据 进行解压 解压后才能用于播放
- 他们本质上就是压缩和解压数据的一种规则
- 所以我们在播放视频时，要用合适的解码器（规则）来解压视频
# 视频兼容性的含义

- 所谓的兼容性就是指硬件之间、软件之间或是软硬件组合系统之间的相互协调工作的程度

- 对于视频文件的兼容性
	- 可以理解为当游戏在不同的操作系统上运行时
	- 该操作系统环境是否支持该视频的播放
# Unity编辑器中的兼容性问题

- 我们可以在 Windows、MacOs 这两个常用操作系统上使用 Unity 进行开发
- 我们可以将很多不同格式的视频文件导入 Unity 中
- 但是如果我们想要正常的在Unity编辑器中预览视频文件
- 那么视频文件必须和这些平台兼容（必须是该平台支持的视频格式）
- 而视频是否兼容对应平台，主要由两个因素决定
	- 视频文件格式
	- 视频文件使用的编解码器
## 关键因素一 文件格式

- ![[视频播放 常用操作系统对视频格式的支持.png]]
- 一般我们在Windows（微软的操作系统）上使用 Unity 开发游戏
- 或者在 macOS （苹果的操作系统）上开发游戏
- 所以我们主要看这两个平台上支持的格式
	- Windows 和 macOS 都支持的格式
		- `.dv`、`.m4v`、`.mov`、`.mp4`、`.mpg`、`.mpeg`、`.ogv`、`.vp8`、`.webm`
	- 建议选择最常见的 `.mp4`，是不会错的
## 关键因素二 编解码器

- 就算使用了都支持的文件格式
- 但是如果制作视频时使用的编解码器在平台上不受支持
- 也会导致视频不能正常使用或者引起 Unity 报错
- 建议使用 H.264 编解码器制作视频
- 它是大多数平台支持的最佳视频编解码器，提供最佳的跨平台兼容性
## 简单总结

- 决定视频兼容性的因素有两个 
	- 视频格式 和 视频编解码器
- 如果想要在 Unity 编辑器中正常预览视频
- 建议导出格式为 `.mp4` 编解码器使用 H.264 的视频
- 它能满足大多数常用平台的兼容性需求
# 发布目标平台的兼容性问题

- 以上讲的兼容性内容都是基于 Unity 编辑器的
- 考虑的都是使用 Unity 编辑器进行开发的平台能不能播放视频
- 但是视频最终在哪个平台播放对于玩家来说才是更重要的
- 比如
	- 我们在Windows上开发，最终要发布为 IOS、Android 平台上
	- 那么这个视频最终目的是要在 IOS、Android 这两个操作系统上能正常播放
	- Windows 能不能正常播其实都不是那么重要了，不能播无非就是不能预览
	- 但是如果在目标平台上不能播放，那么玩家体验是极其不好的
	- 所以目标平台的兼容性问题考虑的就是 **标平台是否可以正常播放视频**

- 我们可以分三种情况来考虑目标平台的兼容性问题
## 第一种情况

- 视频与Unity编辑器平台兼容，但和目标平台不兼容
- 比如
- 视频和 Windows 或者 MacOS 操作系统兼容，但是与要发布游戏的 IOS 或者 Android 平台不兼容
### 解决方案

- Unity 视频剪辑导入器提供了转码功能
- 当我们发布应用时可以进行转码功能来解决该问题
- Unity 自带转码功能，解码器转码为 H.264、H.265、VP8
- **所谓的转码，就是将视频原本的编解码规则变为其它的标准**
## 第二种情况

- 视频与Unity编辑器平台不兼容，但是和目标平台兼容
- 比如
	- 视频和Windows或者MacOs操作系统不兼容，但是与要发布游戏的IOS或者Android平台兼容
### 解决方案

- 一般这种情况下，我们是更希望使用兼容发布平台的格式和编解码器的
- 所以我们可以将这些资源放置在 StrearningAssets 文件夹中
- 在使用视频时，我们根据所在的平台选择性使用对应内容
## 第三种情况

- 视频与Unity编辑器平台和目标平台都兼容
- 在这种情况下，我们不需要进行额外的处理
- 直接正常关联视频进行播放即可
- 这种情况也是我们更加希望达到的
- 这样我们就不需要转码，也不需要根据平台判断了
# 简单记忆目标平台兼容性问题

- 最保险的组合就是 `.mp4` 格式 + H.264 编解码器
- 如果游戏想要发布的平台很多，那么编解码器可以使用 VP8

- H.265 是新的编码协议，也即是 H.264 的升级版
- H.265 标准保留 H.264 原来的某些技术，同时对一些相关的技术加以改进
- 新技术使用先进的技术用以改善码流、编码质量、延时和算法复杂度之间的关系
- 达到最优化设置

- 可使用 H.265 编解码器的平台
	- macOS 11.13+
	- Windows windows 10
	- lOS 11.0+
	- Android 5.0+
# 关于视频文件兼容性总结

- 对于我们来说
- 游戏发布的目标平台兼容性更加重要
- `.mp4`格式 + H.264或者 VP 8编解码器 可以在绝大多数的操作系统上正常播放
- 如果为了极致的提高性能可以准备多个视频文件
- 针对不同的设备使用不同的视频
- 能用H.265的就用H.265编解码器

---
