---
tags:
  - 科学/Uniity/M_Studio/勇士传说/12-创建人物跳跃动画
created: 2024-08-31
---

---
# 关联知识点



---
# 人物跳跃动画

- 人物的跳跃动画有不同的阶段
- 分别为：准备、起跳、空中、下落、落地

- 如果选择 使用 State ，一个一个的把动画连接起来
- 最终在 Animator 上呈现的结果可能过于复杂
- 所以这里选择使用 **Blend Tree** 混合树 制作动画

- 五段跳跃动画，分别为 起跳、升空、最高点、下落、落地下蹲
- ![[M_Studio 勇士传说 12-人物跳跃动画 五个动画阶段一览  .png]]
# Blend Tree
## 参数 `velocityY`

- 当按下空格进行跳跃时，玩家对象上的 Rigidbody 组件 Info 界面
- 参数 `veloctiy`，Y值会随着玩家跳跃而更改

- 起跳瞬间大约为 13左右 ，空中浮动（升空）约为 9，最高点约0，下落动画约为 -3
## 动画配置

- Blend Tree 中 Blend Type 选择 1D ，根据 velocityY 选择不同的动画
	- 根据 Rigidbody 组件上的 `veloctiy` 的 Y值 进行改变
- 根据 跳跃过程中的 不同阶段 对应 的不同 Y值 修改 Motion 中的 参数
- ![[M_Studio 勇士传说 12-人物跳跃动画 Blend Tree Inspector 窗口参数一览  .png]]
### 关于 Jump3 最高点 为什么要设置为 4.5 而不是 0

- 玩家起跳全过程中，起跳前的前一刻、落地时一瞬间、最高点
- 这三个时间点 `velocity` 的Y值都是0
- 如果 Jump3 设置为0，那么在播放动画的时候，这三个时间点 都有可能直接播放 Jump3 动画
	- 而不是播放对应的动画片段
### 关于为什么不添加 Jump 落地下蹲动画

- 这个动画片段单独处理

- 角色下落后，在 落地下蹲 这一个动作时，进行移动的话
- 就会导致一个 处于 落地下蹲 这个动画时就开始移动了

- 所以需要单独处理
## Blend Tree 与 Any State 链接

- 即 任何时候都可以进行跳跃（比如 攻击时利用跳跃取消后摇）
- 注意：连线中 Can Transition To Self 不能勾选，否则就会一直播放 跳跃动画，无法切换到别的动画

- Conditions 为 IsGround 为 false

- ![[M_Studio 勇士传说 12-人物跳跃动画 Blend Tree 与 Any State 链接 Inpsector窗口参数一览  .png]]
## Jump5 与 Exit

- 关于 落地下蹲动画
	- ——>希望角色落地下蹲时，不去移动则继续播放 落地下蹲 动画
	- ——> 如果有移动，快速打断，去播放移动动画

- 实现方法
	- ——> 连接 Exit ，Conditions 为 veloctiy X 大于0.1，即有移动，就马上打断
- 实现效果
	- ——> 落地时不输入（没有移动） 播放 落地下蹲 动画
	- ——> 落地时有输入（有移动），直接播放移动动画

# Animator 连线一览

- ![[M_Studio 勇士传说 12-人物跳跃动画  Animatior 窗口 连线 一览.png]]
## 关于 下落

- 从平台落下去，veloctiy 的 Y值直接就是个负值，就会自动播放 下落动画
	- 也就是 Blend Tree 中的 Jump3 与 Jump4
	- 然后在落地的时候，播放 Jump5

---
